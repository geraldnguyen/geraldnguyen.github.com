<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">

 

  


<title>JSR 303 – Bean Validation – Custom Constraints</title>
<meta data-rh="true" property="og:url" content="https://geraldnguyen.github.io/posts/2012/08/2012-08-25-jsr303-bean-validation-custom-constraints/">
<meta data-rh="true" property="og:title" content="JSR 303 – Bean Validation – Custom Constraints">
<meta data-rh="true" name="description" content="">
<meta data-rh="true" property="og:site_name" content="Gerald Nguyen">
<meta data-rh="true" property="og:description" content="">
<meta data-rh="true" name="twitter:description" content="">
<meta data-rh="true" property="al:web:url" content="https://geraldnguyen.github.io/posts/2012/08/2012-08-25-jsr303-bean-validation-custom-constraints/">
<meta data-rh="true" property="og:type" content="article">


  <meta property="og:image" content="https://geraldnguyen.github.io/geraldnguyen-profile.jpg" data-rh="true">




      <link rel="stylesheet" href="/css/main.min.c26f43265fe59e08f5f7f91bc6df440219638e2c9ed43736fd053a50a9963e69.css" integrity="sha256-wm9DJl/lngj19/kbxt9EAhljjiye1Dc2/QU6UKmWPmk=" crossorigin="anonymous">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">



      <script src="/js/main.23cd0c7d837263b9eaeb96ee2d9ccfa2969daa3fa00fa1c1fe8701a9b87251a1.js" integrity="sha256-I80MfYNyY7nq65buLZzPopadqj&#43;gD6HB/ocBqbhyUaE=" crossorigin="anonymous"></script>


</head>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-HRKMT2G8N9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HRKMT2G8N9');
</script>

<body class="container-xxl">
  <div class="top-menu">
    
  <nav>
    <ul class="nav">
    <li class="nav-item">
      <a class="nav-link" href="/">Home</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/pages/about/">About</a>
    </li>
    </ul>
  </nav>

  </div>

  <header>
    <div class="header-content">
      


  <div class="categories-list">
    <ul>
        <li><a href="/categories/software-development/">Software Development</a></li>
    </ul>
  </div>


<h1>JSR 303 – Bean Validation – Custom Constraints</h1>

<h2 class="subtitle"></h2>





<div class="story-profile-brief d-flex flex-row">
  <div class="me-2">
    
    <img alt="Gerald Nguyen" class="profile-thumbnail rounded-circle"
          src="https://geraldnguyen.github.io/geraldnguyen-profile-thumbnail.jpg" width="44"
          height="44" loading="lazy" data-testid="authorPhoto">
    
  </div>
  <div>
    <div>
      <a rel="noopener follow" href="https://geraldnguyen.github.io/">
        Gerald Nguyen
      </a>
    </div>
    <div>
      <span>2 min read</span>
      <span>·</span>
      <span><time datetime="2012-08-25T09:19:42&#43;01:00">August 25, 2012</time></span>
    </div>
  </div>
            
</div>  


    </div>
    <div class="header-nav">
      
  
  <a href="/posts/2012/08/2012-08-09-jsr303-bean-validation-nested-validation/">Previous</a>
  
  <span> | </span>
  
  <a href="/posts/2012/10/2012-10-24-jdbc-transaction-without-ejb/">Next</a>
  


    </div>
    
  </header>

  <main>
    <div class="bd-toc">
      
  <div class="toc-header">On this page</div>
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#constraint-annotation">Constraint Annotation</a></li>
        <li><a href="#constraint-validator">Constraint Validator</a></li>
      </ul>
    </li>
  </ul>
</nav>

    </div>
    <div class="bd-main">
      

  <p>So far, we have learn the <a href="https://geraldnguyen.github.io/posts/2012/08/2012-08-03-jsr303-bean-validation-basic/">basic</a> and a not-so-common <a href="https://geraldnguyen.github.io/posts/2012/08/2012-08-09-jsr303-bean-validation-nested-validation/">nested usage</a> of JSR 303 Bean Validation, it’s time to learn how the declarative validation rule was implemented. In another word, we will learn to create a custom constraint this this post.</p>
<h2 id="constraint-annotation">Constraint Annotation</h2>
<p>Custom constraint is a special kind of annotation that is itself annotated with <code>@javax.validation.Constraint</code> annotation. For example:</p>
<pre tabindex="0"><code>@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy=CustomeValidator.class) 
public @interface CustomConstraint {
   String message() default &#34;Custom validation failed&#34;;
   Class[] groups() default {};
   Class&lt;? extends Payload&gt;[] payload() default {};
}
</code></pre><p>Your own custom constraint will look pretty much like the one above, except for:</p>
<p>– <strong>validatedBy</strong>: the name of the class that implement the actual validation logic. For example, if your constraint requires that an input field matches some regex, the matching will be carried out in an instance of the specified class.</p>
<p>– <strong>annotation name</strong>: obviously you will want to give your constrain a more meaningful name rather than the dull CustomeConstraint</p>
<p>– <strong>message</strong>: some meaningful message to return to program’s user</p>
<h2 id="constraint-validator">Constraint Validator</h2>
<p>Your constraint validator must implement <code>javax.validation.ConstraintValidator</code>. For example:</p>
<pre tabindex="0"><code>public class CustomeValidator implements ConstraintValidator&lt;CustomConstraint, CustomeType&gt;
{
    @Override
    public void initialize(CustomConstraint constraint) { }
 
    @Override
    public boolean isValid(CustomeType value, ConstraintValidatorContext validatorContext)
    {
        //your implementation
    }
}
</code></pre><p>In addition to the obvious class name and <code>isValid’s</code> code, you will need to modify the 2 parametered types in the class declaration section:</p>
<p>– The first one is the class name of your custom constraint. If you had named your constraint “NeedNoNameConstraint”, by all mean, place “NeedNoNameConstraint” there in place of “CustomConstraint”.</p>
<p>– The second one is the class name of the object you will apply the annotation on. It could be <code>String</code> or some other type.</p>
<p>So, that’s all what needed to create a custom constraint. Pretty straightforward right?</p>

  
  
  <div class="tags-list">
    <ul>
        <li><a href="/tags/java/">Java</a></li>
        <li><a href="/tags/jsr303-bean-validation/">Jsr303 Bean Validation</a></li>
        <li><a href="/tags/old-blog/">Old Blog</a></li>
    </ul>
  </div>


    </div>
    
  </main>
  <footer>
    <p>Copyright 2024. All rights reserved.</p>

  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

</body>
</html>
